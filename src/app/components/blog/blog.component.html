<div class="blog-page" [attr.dir]="i18nService.isRTL() ? 'rtl' : 'ltr'">
  <!-- Hero Section -->
  <section class="page-header">
    <div class="header-background">
      <img src="/assets/images/hero_banner.png" alt="Blog" class="header-image" />
      <div class="header-overlay"></div>
    </div>
    <div class="header-content">
      <div class="container">
        <h1 class="page-title fade-in">{{ i18nService.translate('blogTitle') }}</h1>
        <p class="page-subtitle fade-in">{{ i18nService.translate('blogSubtitle') }}</p>
      </div>
    </div>
  </section>

  <!-- Blog Content -->
  <section class="blog-content">
    <div class="container">
      <!-- Categories Filter -->
      <div class="blog-filters">
        <h3>{{ i18nService.translate('categories') }}</h3>
        <div class="filter-buttons">
          <button *ngFor="let category of categories" class="filter-btn"
            [class.active]="selectedCategory === category.key" (click)="filterByCategory(category.key)">
            {{ getLocalizedText(category.name) }}
          </button>
        </div>
      </div>

      <!-- Blog Posts Grid -->
      <div class="blog-grid">
        <article *ngFor="let post of filteredPosts; let i = index" class="blog-card" [class.rtl]="i18nService.isRTL()">
          <div class="blog-image">
            <img [src]="post.imageUrl" [alt]="getLocalizedText(post.title)" loading="lazy" />
            <div class="image-overlay">
              <span class="chip chip-category">{{ getLocalizedText(post.category) }}</span>
              <span class="chip chip-time">
                <span class="material-icons">schedule</span>
                {{ post.readTime }} {{ i18nService.translate('minutesRead') }}
              </span>
            </div>
          </div>

          <div class="blog-content-card">
            <header class="blog-header">
              <div class="author">
                <div class="avatar">
                  <span>{{ getLocalizedText(post.author) | slice:0:1 }}</span>
                </div>
                <div class="byline">
                  <div class="name">{{ getLocalizedText(post.author) }}</div>
                  <div class="date">
                    <span class="material-icons">event</span>
                    {{ i18nService.formatDate(post.publishDate) }}
                  </div>
                </div>
              </div>
              <button class="btn-ghost icon-only" (click)="$event.stopPropagation()">
                <span class="material-icons">bookmark_border</span>
              </button>
            </header>

            <h3 class="blog-title">{{ getLocalizedText(post.title) }}</h3>

            <p class="blog-excerpt">{{ getLocalizedText(post.excerpt) }}</p>

            <div class="blog-tags" *ngIf="post.tags?.length">
              <span *ngFor="let tag of post.tags[0]" class="blog-tag">#{{ getLocalizedText(tag) }}</span>
            </div>

            <footer class="blog-footer">
              <button class="btn btn-primary" (click)="readPost(post)">
                {{ i18nService.translate('readMore') }}
                <span class="material-icons">{{ i18nService.isRTL() ? 'arrow_back' : 'arrow_forward' }}</span>
              </button>

              <div class="quick-actions">
                <div class="share-container" (click)="$event.stopPropagation()">
                  <div class="share-wrapper">
                    <button class="btn-ghost share-toggle" (click)="toggleSharePopup(i, $event)">
                      <span class="material-icons">share</span>
                      <span class="sr-only">{{ i18nService.translate('share') || 'Share' }}</span>
                    </button>

                    <div class="share-popup" *ngIf="isShareOpen(i)" role="menu" aria-label="Share options" (click)="$event.stopPropagation()">
                      <!-- Copy link -->
                      <button class="share-item" (click)="copyLinkToClipboard(post)" role="menuitem" title="Copy link">
                        <span class="icon material-icons" aria-hidden="true">link</span>
                        <span class="label">{{ i18nService.translate('copyLinkPrompt') || 'Copy Link' }}</span>
                      </button>

                      <!-- Facebook -->
                      <a class="share-item" role="menuitem" [href]="getFacebookShareUrl(post)" target="_blank" rel="noopener" title="Facebook">
                        <span class="icon material-icons" aria-hidden="true">facebook</span>
                        <span class="label">Facebook</span>
                      </a>

                      <!-- X / Twitter -->
                      <!-- <a class="share-item" role="menuitem" [href]="getTwitterShareUrl(post)" target="_blank" rel="noopener" title="X">
                        <span class="icon material-icons" aria-hidden="true">alternate_email</span>
                        <span class="label">X</span>
                      </a> -->

                      <!-- WhatsApp -->
                      <a class="share-item" role="menuitem" [href]="getWhatsAppShareUrl(post)" target="_blank" rel="noopener" title="WhatsApp">
                        <span class="icon" aria-hidden="true">
                          <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" focusable="false" aria-hidden="true">
                            <path d="M20.52 3.48A11.85 11.85 0 0012 .5C6.21.5 1.5 5.21 1.5 11c0 1.94.5 3.85 1.45 5.52L.5 23.5l6.98-2.09A11.86 11.86 0 0012 22.5c5.79 0 10.5-4.71 10.5-10.5 0-3.02-1.18-5.85-3.98-8.52z" opacity="0"/>
                            <path d="M17.472 14.382c-.297-.149-1.759-.868-2.031-.967-.273-.099-.472-.149-.672.15-.198.297-.768.966-.94 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.476-.885-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.52.149-.173.198-.298.297-.496.099-.198.05-.372-.025-.52-.074-.149-.672-1.62-.92-2.217-.242-.58-.487-.5-.672-.51l-.57-.01c-.198 0-.52.074-.793.372s-1.04 1.016-1.04 2.479 1.065 2.876 1.213 3.074c.149.198 2.095 3.2 5.077 4.487 0 0 .236.096.423.048.187-.048 1.32-.536 1.506-1.053.186-.517.186-.96.13-1.053-.05-.099-.198-.149-.396-.297z" fill="currentColor"/>
                          </svg>
                        </span>
                        <span class="label">WhatsApp</span>
                      </a>

                      <!-- Telegram -->
                      <!-- <a class="share-item" role="menuitem" [href]="getTelegramShareUrl(post)" target="_blank" rel="noopener" title="Telegram">
                        <span class="icon material-icons" aria-hidden="true">send</span>
                        <span class="label">Telegram</span>
                      </a> -->

                      <!-- LinkedIn -->
                      <!-- <a class="share-item" role="menuitem" [href]="getLinkedinShareUrl(post)" target="_blank" rel="noopener" title="LinkedIn">
                        <span class="icon material-icons" aria-hidden="true">work</span>
                        <span class="label">LinkedIn</span>
                      </a> -->
                    </div>
                  </div>
                </div>
              </div>
            </footer>
          </div>
        </article>

      </div>

      <!-- Load More Button -->
      <div class="load-more" *ngIf="hasMorePosts">
        <button class="btn btn-secondary" (click)="loadMorePosts()">
          {{ i18nService.translate('loadMorePosts') }}
        </button>
      </div>
    </div>
  </section>

  <!-- Newsletter Signup -->
  <section class="newsletter-section">
    <div class="container">
      <div class="newsletter-content">
        <h3>{{ i18nService.translate('stayUpdated') }}</h3>
        <p>{{ i18nService.translate('stayUpdatedDesc') }}</p>
        <div class="newsletter-form">
          <input type="email" [placeholder]="i18nService.translate('enterEmail')" class="newsletter-input"
            [style.text-align]="i18nService.isRTL() ? 'right' : 'left'">
          <button class="btn btn-accent">
            {{ i18nService.translate('subscribe') }}
          </button>
        </div>
      </div>
    </div>
  </section>
</div>
