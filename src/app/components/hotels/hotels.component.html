<div class="hotels-container" [class.rtl]="i18nService.isRTL()" [class.ltr]="!i18nService.isRTL()">
  <!-- Page Header -->
  <section class="page-header">
    <div class="header-background">
      <img src="/assets/images/nile_river.jpg" alt="Minya Hotels" class="header-image" />
      <div class="header-overlay"></div>
    </div>
    <div class="header-content">
      <div class="container">
        <h1 class="page-title fade-in">
          {{ i18nService.translate('hotelsTitle') }}
        </h1>
        <p class="page-subtitle fade-in">
          {{ i18nService.translate('hotelsSubtitle') }}
        </p>
      </div>
    </div>
  </section>

  <!-- Search and Filters -->
  <section class="filters-section">
    <div class="container">
      <div class="search-filters">
        <div class="search-input-wrapper">
          <span class="material-icons search-icon">search</span>
          <input type="text" class="search-input" [placeholder]="i18nService.translate('searchHotels')"
            [(ngModel)]="searchQuery" (input)="onSearch()" />
        </div>

        <div class="filter-controls">
          <!-- star rating keeps string values, you already parseInt in TS -->
          <select [(ngModel)]="selectedStarRating" (change)="onFilterChange()" class="filter-select">
            <option value="">{{ i18nService.translate('allStarRatings') }}</option>
            <option value="5">{{ i18nService.translate('fiveStars') }}</option>
            <option value="4">{{ i18nService.translate('fourStars') }}</option>
            <option value="3">{{ i18nService.translate('threeStars') }}</option>
            <option value="2">{{ i18nService.translate('twoStars') }}</option>
          </select>

          <!-- price range values match your TS switch: budget/mid/luxury -->
          <select [(ngModel)]="selectedPriceRange" (change)="onFilterChange()" class="filter-select">
            <option value="">{{ i18nService.translate('allPriceRanges') }}</option>
            <option value="budget">{{ i18nService.translate('priceBudget') }}</option>
            <option value="mid">{{ i18nService.translate('priceMid') }}</option>
            <option value="luxury">{{ i18nService.translate('priceLuxury') }}</option>
          </select>
        </div>
      </div>

      <div class="results-info" *ngIf="filteredHotels.length > 0">
        <p>
          {{ i18nService.formatNumber(filteredHotels.length) }} /
          {{ i18nService.formatNumber(totalHotels) }}
          {{ i18nService.translate('hotels') }}
        </p>
      </div>
    </div>
  </section>

  <!-- Hotels List -->
  <section class="hotels-section">
    <div class="container">
      <!-- Loading -->
      <div class="loading-container" *ngIf="loading">
        <div class="spinner"></div>
        <p>{{ i18nService.translate('loading') }}</p>
      </div>

      <!-- Grid -->
      <div class="hotels-grid" *ngIf="!loading && filteredHotels.length > 0">
        <div class="hotel-card" *ngFor="let hotel of filteredHotels; trackBy: trackByHotelId">
          <div class="hotel-image">
            <img [src]="hotel.imageUrl" [alt]="getHotelName(hotel)" loading="lazy" />
            <div class="hotel-overlay">
              <div class="star-rating">
                <span class="material-icons" *ngFor="let _ of getStarArray(hotel.starRating)">star</span>
              </div>
              <div class="rating-badge">
                <span class="material-icons">star</span>
                <span>{{ i18nService.formatNumber(hotel.rating) }}</span>

              </div>


            </div>
            <button class="btn-favorite" [class.active]="isFavorite(hotel.id)" (click)="toggleFavorite(hotel, $event)"
              [attr.aria-label]="
      isFavorite(hotel.id)
        ? (i18nService.translate('removeFromFavorites') || 'Remove from favorites')
        : (i18nService.translate('addToFavorites') || 'Add to favorites')
    ">
              <span class="material-icons">{{ isFavorite(hotel.id) ? 'favorite' : 'favorite_border' }}</span>
            </button>
          </div>

          <div class="hotel-content">
            <h3 class="hotel-name">{{ getHotelName(hotel) }}</h3>
            <p class="hotel-description">
              {{ getHotelDescription(hotel) | slice:0:120 }}...
            </p>

            <div class="hotel-details">
              <div class="price-range">
                <span class="material-icons">local_offer</span>
                <span>{{ i18nService.pick(hotel.priceRange) }}</span>

              </div>
              <div class="review-count">
                <span class="material-icons">reviews</span>
                <span>
                  {{ i18nService.formatNumber(hotel.reviewCount) }}
                  {{ i18nService.translate('reviews') }}
                </span>
              </div>
            </div>

            <ng-container *ngIf="hotel?.amenities as ams">
              <div class="amenities-preview" *ngIf="ams.length > 0">
                <span class="amenity-tag" *ngFor="let amenity of ams | slice:0:3">
                  {{ getAmenity(amenity) }}
                </span>
                <span class="more-amenities" *ngIf="ams.length > 3">
                  +{{ i18nService.formatNumber(ams.length - 3) }}
                  {{ i18nService.translate('more') }}
                </span>
              </div>
            </ng-container>

            <div class="hotel-actions">
              <button class="btn btn-primary" (click)="viewHotelDetails(hotel)">
                <span class="material-icons">visibility</span>
                {{ i18nService.translate('viewDetails') }}
              </button>
              <button class="btn btn-accent" (click)="bookHotel(hotel)">
                <span class="material-icons">hotel</span>
                {{ i18nService.translate('bookNow') }}
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- No Results -->
      <div class="no-results" *ngIf="!loading && filteredHotels.length === 0">
        <div class="no-results-icon">
          <span class="material-icons">hotel_class</span>
        </div>
        <h3>{{ i18nService.translate('noResults') }}</h3>
        <p>{{ i18nService.translate('exploreHotels') }}</p>
        <button class="btn btn-primary" (click)="clearFilters()">
          <span class="material-icons">clear</span>
          {{ i18nService.translate('clearFilters') }}
        </button>
      </div>
    </div>
  </section>

  <!-- Booking Tips -->
  <section class="tips-section">
    <div class="container">
      <h2 class="section-title">{{ i18nService.translate('bookingTips') }}</h2>
      <div class="tips-grid">
        <div class="tip-card">
          <div class="tip-icon"><span class="material-icons">schedule</span></div>
          <h3>{{ i18nService.translate('bestTimeToBook') }}</h3>
          <p>{{ i18nService.translate('bestTimeToBookDesc') }}</p>
        </div>
        <div class="tip-card">
          <div class="tip-icon"><span class="material-icons">location_on</span></div>
          <h3>{{ i18nService.translate('locationMatters') }}</h3>
          <p>{{ i18nService.translate('locationMattersDesc') }}</p>
        </div>
        <div class="tip-card">
          <div class="tip-icon"><span class="material-icons">local_offer</span></div>
          <h3>{{ i18nService.translate('packageDeals') }}</h3>
          <p>{{ i18nService.translate('packageDealsDesc') }}</p>
        </div>
      </div>
    </div>
  </section>
</div>